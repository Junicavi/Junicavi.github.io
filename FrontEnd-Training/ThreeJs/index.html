<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Three JS Test</title>
    <link rel="stylesheet" type="text/css" href="src/style.css">
</head>
<body>
    <script src="js/three.js"></script>
    <script src="js/ColladaLoader.js"></script>
    <script>
        //SCENE SETUP
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        var light = new THREE.AmbientLight( 0xffffff );
        var player= null;
        var player2= null;
        scene.background = new THREE.Color (0x000000);
        //PLANE SETUP//
        var geometry = new THREE.PlaneGeometry(7,5);
        var texture = new THREE.TextureLoader().load('src/Images/Floor4.jpg');
        texture.wrapS = THREE.RepeatWrapping;
        texture.wrapT = THREE.RepeatWrapping;
        texture.repeat.set(4,4);
        var material = new THREE.MeshBasicMaterial({map:texture});
        // var material = new THREE.MeshBasicMaterial({color:0xffff00, side: THREE.DoubleSide});
        var plane = new THREE.Mesh(geometry, material);
        plane.material.side = THREE.DoubleSide;
        plane.position.z=-1;
        plane.rotation.x = Math.PI/1.7;
        //ADDING ELEMENTS//
        scene.add(light);
        scene.add(plane);
        //RENDERER//
        var renderer = new THREE.WebGLRenderer({antialias:true});
        renderer.setSize(window.innerWidth,window.innerHeight);
        document.body.appendChild( renderer.domElement);
        //CAR//
        loader = new THREE.ColladaLoader();
        // loader.options.convertUpAxis = true;
        loader.load('Model2.dae',function colladaReady( collada ){

            player = collada.scene;
            for (var i=0; i < player.children.length; i++) {
                    function randomColor(){
                        var letters = '0123456789ABCDEF';
                        var color = '#';
                        for (var i = 0; i < 6; i++) {
                            color += letters[Math.floor(Math.random()*16)];
                        }
                    return color;
                }
                player.children[i].material= new THREE.MeshBasicMaterial({color:randomColor()});
            }

            scene.add( player );
        });
        //LEFT COLUMN
        loader2 = new THREE.ColladaLoader();
        // loader2.options.convertUpAxis = true;
        loader2.load('Column.dae',function colladaReady( collada ){
            player2 = collada.scene;
            player2.scale.set(0.5,0.5,0.5);
            player2.position.set(-2.5,1,-2);
            /*player2.children[0].material = new THREE.MeshPhongMaterial();
            player2.children[0].material.map = new THREE.TextureLoader().load('src/Images/Column1.png'); */
            // for (var i=0; i < player2.children.length; i++) {
            //         function randomColor(){
            //             var letters = '0123456789ABCDEF';
            //             var color = '#';
            //             for (var i = 0; i < 6; i++) {
            //                 color += letters[Math.floor(Math.random()*16)];
            //             }
            //         return color;
            //     }
            //     player2.children[i].material= new THREE.MeshBasicMaterial({color:randomColor()});
            // }            
            scene.add( player2 );
        });
        //RIGHT COLUMN//
        loader3 = new THREE.ColladaLoader();
        // loader3.options.convertUpAxis = true;
        loader3.load('Column.dae',function colladaReady( collada ){

            player3 = collada.scene;
            player3.scale.set(0.5,0.5,0.5);
            player3.position.set(2.5,1,-2);
            scene.add( player3 );
        });
        //CAMERA POSITION//
        camera.position.y = 1.2;
        camera.position.z = 5;
        //ANIMATE CAR AND DISPLAY SCENE//
        var animate = function () {
            requestAnimationFrame (animate);

            if(player!=null){
                player.rotation.y+=0.01;
                player.rotation.z+=0.0;
                
            }
            if(player2!=null){
                player2.rotation.y+=0.0;
                player2.rotation.z+=0.01;
            }            
            if(player3!=null){
                player3.rotation.y+=0.0;
                player3.rotation.z+=0.01;
            }

            renderer.render( scene, camera);
        }
        animate();
    </script>
</body>
</html>